{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47849639-14a05baa764e681cfc3185886'; \nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","export function renderGallery(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n          <div class=\"gallery__card\">\n            <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"gallery__info\">\n              <p><b>Likes:</b> ${likes}</p>\n              <p><b>Views:</b> ${views}</p>\n              <p><b>Comments:</b> ${comments}</p>\n              <p><b>Downloads:</b> ${downloads}</p>\n            </div>\n          </div>\n        </a>`\n    )\n    .join('');\n}\n\nexport function showMessage(message) {\n  const errorMessage = document.querySelector('.error-message');\n  errorMessage.textContent = message;\n  errorMessage.classList.remove('hidden');\n}\n\nexport function hideMessage() {\n  const errorMessage = document.querySelector('.error-message');\n  errorMessage.classList.add('hidden');\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery, showMessage, hideMessage } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  query = event.target.elements.searchQuery.value.trim();\n  page = 1;\n  gallery.innerHTML = '';\n  hideMessage();\n  loadMoreButton.classList.add('hidden');\n\n  if (!query) {\n    showMessage('Please enter a search query.');\n    return;\n  }\n\n  try {\n    loader.classList.remove('hidden');\n    const data = await fetchImages(query, page, perPage);\n    loader.classList.add('hidden');\n\n    if (data.hits.length === 0) {\n      showMessage('Sorry, no images found. Try a different query!');\n      return;\n    }\n\n    gallery.innerHTML = renderGallery(data.hits);\n    lightbox.refresh();\n    loadMoreButton.classList.toggle('hidden', data.hits.length < perPage);\n  } catch (error) {\n    showMessage('Something went wrong. Please try again later.');\n    console.error(error);\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  hideMessage();\n\n  try {\n    loader.classList.remove('hidden');\n    const data = await fetchImages(query, page, perPage);\n    loader.classList.add('hidden');\n\n    gallery.insertAdjacentHTML('beforeend', renderGallery(data.hits));\n    lightbox.refresh();\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreButton.classList.add('hidden');\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    showMessage('Something went wrong. Please try again later.');\n    console.error(error);\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","renderGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showMessage","message","errorMessage","hideMessage","form","gallery","loadMoreButton","loader","lightbox","SimpleLightbox","onSearch","onLoadMore","event","data"],"mappings":"wvBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCvBO,SAASC,EAAcC,EAAQ,CACpC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,wCAC4BL,CAAa;AAAA;AAAA,+CAEND,CAAY,UAAUE,CAAI;AAAA;AAAA,iCAExCC,CAAK;AAAA,iCACLC,CAAK;AAAA,oCACFC,CAAQ;AAAA,qCACPC,CAAS;AAAA;AAAA;AAAA,aAIzC,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,EAAYC,EAAS,CACnC,MAAMC,EAAe,SAAS,cAAc,gBAAgB,EAC5DA,EAAa,YAAcD,EAC3BC,EAAa,UAAU,OAAO,QAAQ,CACxC,CAEO,SAASC,GAAc,CACP,SAAS,cAAc,gBAAgB,EAC/C,UAAU,IAAI,QAAQ,CACrC,CC/BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIrB,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIoB,EAAW,IAAIC,EAAe,YAAY,EAE9CL,EAAK,iBAAiB,SAAUM,CAAQ,EACxCJ,EAAe,iBAAiB,QAASK,CAAU,EAEnD,eAAeD,EAASE,EAAO,CAQ7B,GAPAA,EAAM,eAAc,EACpB1B,EAAQ0B,EAAM,OAAO,SAAS,YAAY,MAAM,OAChDzB,EAAO,EACPkB,EAAQ,UAAY,GACpBF,IACAG,EAAe,UAAU,IAAI,QAAQ,EAEjC,CAACpB,EAAO,CACVc,EAAY,8BAA8B,EAC1C,MACD,CAED,GAAI,CACFO,EAAO,UAAU,OAAO,QAAQ,EAChC,MAAMM,EAAO,MAAM5B,EAAYC,EAAOC,EAAMC,CAAO,EAGnD,GAFAmB,EAAO,UAAU,IAAI,QAAQ,EAEzBM,EAAK,KAAK,SAAW,EAAG,CAC1Bb,EAAY,gDAAgD,EAC5D,MACD,CAEDK,EAAQ,UAAYd,EAAcsB,EAAK,IAAI,EAC3CL,EAAS,QAAO,EAChBF,EAAe,UAAU,OAAO,SAAUO,EAAK,KAAK,OAASzB,CAAO,CACrE,OAAQE,EAAO,CACdU,EAAY,+CAA+C,EAC3D,QAAQ,MAAMV,CAAK,CACpB,CACH,CAEA,eAAeqB,GAAa,CAC1BxB,GAAQ,EACRgB,IAEA,GAAI,CACFI,EAAO,UAAU,OAAO,QAAQ,EAChC,MAAMM,EAAO,MAAM5B,EAAYC,EAAOC,EAAMC,CAAO,EACnDmB,EAAO,UAAU,IAAI,QAAQ,EAE7BF,EAAQ,mBAAmB,YAAad,EAAcsB,EAAK,IAAI,CAAC,EAChEL,EAAS,QAAO,EAEZrB,EAAOC,GAAWyB,EAAK,YACzBP,EAAe,UAAU,IAAI,QAAQ,EACrCN,EAAY,4DAA4D,EAE3E,OAAQV,EAAO,CACdU,EAAY,+CAA+C,EAC3D,QAAQ,MAAMV,CAAK,CACpB,CACH"}